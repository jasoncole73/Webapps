<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Computer Content</title>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: 'Tahoma', sans-serif;
            font-size: 11px;
            background-color: #fff;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .toolbar {
            background-color: #ece9d8;
            padding: 3px 5px;
            border-bottom: 1px solid #aca899;
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }
        .toolbar button {
            font-family: 'Tahoma', sans-serif;
            font-size: 11px;
            padding: 2px 8px;
            margin-right: 5px;
            border: 1px outset #ccc;
            background-color: #f0f0f0;
            cursor: pointer;
        }
        .toolbar button:disabled {
            color: #aca899;
            cursor: default;
        }
        .address-bar {
            display: flex;
            align-items: center;
            padding: 3px 5px;
            border-bottom: 1px solid #aca899;
            background-color: #f0f0f0;
            flex-shrink: 0;
        }
        .address-bar label { margin-right: 5px; }
        .address-bar input {
            flex-grow: 1;
            font-family: 'Tahoma', sans-serif;
            font-size: 11px;
            border: 1px inset #7f9db9;
            padding: 2px;
        }
        .content-area {
            flex-grow: 1;
            padding: 10px;
            overflow-y: auto;
            background-color: white;
            display: flex;
            flex-wrap: wrap; /* For icon view */
            align-content: flex-start;
            gap: 15px;
        }
        .fs-item { /* File System Item */
            width: 80px;
            text-align: center;
            padding: 5px;
            cursor: pointer;
            border-radius: 3px;
        }
        .fs-item:hover {
            background-color: #e0e8f0; /* Light blue selection */
            /* border: 1px solid #a0b8d0; */
        }
        .fs-item-icon {
            font-size: 32px; /* Adjust as needed for your icons */
            margin-bottom: 5px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .fs-item-name {
            font-size: 11px;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <div class="toolbar">
        <button id="back-button" disabled>â¬… Back</button>
        <!-- Add Up, Search, Folders buttons later if desired -->
    </div>
    <div class="address-bar">
        <label for="current-path">Address:</label>
        <input type="text" id="current-path" value="My Computer" readonly>
    </div>
    <div class="content-area" id="file-explorer-content">
        <!-- Content will be generated by JS -->
    </div>

    <script>
        const contentArea = document.getElementById('file-explorer-content');
        const backButton = document.getElementById('back-button');
        const currentPathInput = document.getElementById('current-path');

        const fileSystem = {
            'My Computer': {
                type: 'root',
                icon: 'ðŸ’»', // Default Computer icon
                children: ['Local Disk (C:)', 'CD Drive (D:)']
            },
            'Local Disk (C:)': {
                type: 'drive',
                icon: 'ðŸ’¾', // Floppy for drive, or find a better one
                children: ['Program Files', 'Windows', 'My Documents']
            },
            'CD Drive (D:)': {
                type: 'drive',
                icon: 'ðŸ’¿',
                children: ['(empty)'] // Example
            },
            'Program Files': { type: 'folder', icon: 'ðŸ“', children: ['Game Folder', 'Utility Folder'] },
            'Windows': { type: 'folder', icon: 'ðŸ“', children: ['System32', 'Fonts'] },
            'My Documents': { type: 'folder', icon: 'ðŸ“', children: ['My Pictures (folder)', 'My Music (folder)', 'report.txt'] },
            '(empty)': { type: 'message', icon: '' },
            'Game Folder': { type: 'folder', icon: 'ðŸ“', children: [] },
            'Utility Folder': { type: 'folder', icon: 'ðŸ“', children: [] },
            'System32': { type: 'folder', icon: 'ðŸ“', children: [] },
            'Fonts': { type: 'folder', icon: 'ðŸ“', children: [] },
            'My Pictures (folder)': { type: 'folder', icon: 'ðŸ–¼ï¸', children: [] },
            'My Music (folder)': { type: 'folder', icon: 'ðŸŽµ', children: [] },
            'report.txt': { type: 'file', icon: 'ðŸ“„' }
        };

        let currentPath = ['My Computer'];
        let navigationHistory = []; // For back button

        function renderPath(pathArray) {
            const pathString = pathArray.join('\\');
            currentPathInput.value = pathString;
            contentArea.innerHTML = ''; // Clear previous items

            const currentLocation = pathArray.reduce((loc, part) => loc && loc.children ? fileSystem[loc.children.find(c => c === part)] || fileSystem[part] : fileSystem[part], fileSystem[pathArray[0]]);
            let itemsToShow = [];

            if (pathArray.length === 1 && pathArray[0] === 'My Computer') {
                itemsToShow = fileSystem['My Computer'].children;
            } else {
                const lastDirName = pathArray[pathArray.length - 1];
                const currentDir = fileSystem[lastDirName];
                if (currentDir && currentDir.children) {
                    itemsToShow = currentDir.children;
                } else if (currentDir && currentDir.type === 'file') {
                    // If it's a file, maybe show "Cannot open file" or its details. For now, just show its icon.
                     itemsToShow = [lastDirName]; // Display the file itself
                } else {
                    contentArea.textContent = "Folder not found or is empty.";
                    return;
                }
            }


            itemsToShow.forEach(itemName => {
                const itemData = fileSystem[itemName] || { type: 'unknown', icon: 'â“', name: itemName }; // Fallback for unknown
                const itemDiv = document.createElement('div');
                itemDiv.className = 'fs-item';
                itemDiv.dataset.name = itemName;
                itemDiv.dataset.type = itemData.type;

                const iconDiv = document.createElement('div');
                iconDiv.className = 'fs-item-icon';
                iconDiv.textContent = itemData.icon || (itemData.type === 'folder' ? 'ðŸ“' : (itemData.type === 'drive' ? 'ðŸ’¾' : 'â“'));

                const nameDiv = document.createElement('div');
                nameDiv.className = 'fs-item-name';
                nameDiv.textContent = itemName;

                itemDiv.appendChild(iconDiv);
                itemDiv.appendChild(nameDiv);

                if (itemData.type !== 'message' && itemData.type !== 'file') { // Files and messages are not navigable further in this demo
                    itemDiv.addEventListener('dblclick', () => navigateTo(itemName));
                } else if (itemData.type === 'file') {
                     itemDiv.addEventListener('dblclick', () => alert(`Simulating opening file: ${itemName}`));
                }


                contentArea.appendChild(itemDiv);
            });

            backButton.disabled = currentPath.length <= 1;
        }

        function navigateTo(itemName) {
            const targetItem = fileSystem[itemName];
            // Only navigate if it's a known folder/drive with children or it's the root "My Computer"
            if (targetItem && (targetItem.children || itemName === 'My Computer')) {
                navigationHistory.push([...currentPath]); // Save current path before navigating
                currentPath.push(itemName);
                renderPath(currentPath);
            } else if (targetItem && targetItem.type === 'file') {
                alert(`Simulating opening file: ${itemName}`);
            } else if (!targetItem || targetItem.type === 'message'){
                // Do nothing or show message for unknown/empty
                console.log("Cannot navigate into:", itemName);
            } else {
                // Potentially navigating to a deeper level that only shows a list of files
                // For this demo, we'll just stop at the first level of folders inside C:
                 if (currentPath.length >=2 && currentPath[1] === 'Local Disk (C:)' && currentPath.length < 3 && targetItem.type === 'folder') {
                    navigationHistory.push([...currentPath]);
                    currentPath.push(itemName);
                    renderPath(currentPath);
                 } else if (targetItem.type === 'folder') {
                     alert(`Contents of "${itemName}" not shown in this demo.`);
                 }
            }
        }

        backButton.addEventListener('click', () => {
            if (navigationHistory.length > 0) {
                currentPath = navigationHistory.pop();
                renderPath(currentPath);
            }
        });

        // --- Cleanup Function ---
        function cleanupGame() { // Using 'cleanupGame' for consistency
            console.log("[MyComputer] cleanup called.");
            // No active intervals or global listeners to remove for My Computer
        }

        // --- Event listener for messages from parent ---
        window.addEventListener('message', (event) => {
            if (event.data === 'cleanup') {
                cleanupGame();
            }
        });

        // Initial render
        renderPath(currentPath);
        window.focus(); // Try to ensure iframe gets focus for its content

    </script>
</body>
</html>