<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
    /* Styles specific to Paint app */
    body { margin: 0; display: flex; flex-direction: column; height: 100vh; background-color: #ece9d8; font-family: Tahoma, sans-serif; overflow: hidden;}
    .paint-controls { display: flex; align-items: center; flex-wrap: wrap; padding: 3px; background-color: #ece9d8; border-bottom: 1px solid #bbb; flex-shrink: 0; /* Prevent controls from shrinking */}
    .paint-controls button { font-size: 11px; padding: 2px 5px; margin: 2px; }
    .color-palette { display: flex; margin-left: 10px; }
    .color-box { width: 18px; height: 18px; border: 1px solid #888; margin: 0 2px; cursor: pointer; }
    .color-box.selected { border: 2px solid black; }
    #selected-color-display { margin-left: 5px; font-size: 11px; display: flex; align-items: center; }
    #selected-color-display span { display: inline-block; width: 16px; height: 16px; border: 1px solid #555; margin-right: 4px; vertical-align: middle; }
    #paint-canvas { border: 1px solid #888; cursor: crosshair; display: block; background-color: white; margin: 5px; /* Canvas takes remaining space */}
</style>
</head>
<body>
    <div class="paint-controls">
         <button id="clear-canvas-button">Clear</button>
         <div class="color-palette">
             <div class="color-box selected" style="background-color: black;" data-color="black"></div> <div class="color-box" style="background-color: gray;" data-color="gray"></div>
             <div class="color-box" style="background-color: red;" data-color="red"></div> <div class="color-box" style="background-color: orange;" data-color="orange"></div>
             <div class="color-box" style="background-color: yellow;" data-color="yellow"></div> <div class="color-box" style="background-color: lime;" data-color="lime"></div>
             <div class="color-box" style="background-color: blue;" data-color="blue"></div> <div class="color-box" style="background-color: purple;" data-color="purple"></div>
             <div class="color-box" style="background-color: white;" data-color="white"></div>
         </div>
         <div id="selected-color-display">Color: <span style="background-color: black;"></span></div>
     </div>
     <canvas id="paint-canvas"></canvas>

     <script>
        const paintCanvas = document.getElementById('paint-canvas');
        const paintCtx = paintCanvas.getContext('2d');
        const controlsDiv = document.querySelector('.paint-controls');
        let isDrawingPaint = false, lastPaintX, lastPaintY;
        let currentPaintColor = 'black';

        function resizeCanvas() {
            // Resize canvas based on available space within the iframe's body
            const controlsHeight = controlsDiv.offsetHeight;
            // Use parent window's dimensions minus controls and margins
            paintCanvas.width = document.body.clientWidth - 10; // Account for margin
            paintCanvas.height = document.body.clientHeight - controlsHeight - 10; // Account for controls and margin
            // Re-apply drawing settings after resize
             paintCtx.lineWidth = 2;
             paintCtx.lineJoin = 'round';
             paintCtx.lineCap = 'round';
             setPaintColor(currentPaintColor);
        }

        function setPaintColor(color) {
             currentPaintColor = color;
             paintCtx.strokeStyle = currentPaintColor;
             const colorDisplay = document.getElementById('selected-color-display');
             if(colorDisplay) colorDisplay.querySelector('span').style.backgroundColor = color;
             document.querySelectorAll('.color-box').forEach(box => {
                 box.classList.toggle('selected', box.dataset.color === color);
             });
        }

        paintCanvas.addEventListener('mousedown', (e) => { isDrawingPaint = true; [lastPaintX, lastPaintY] = [e.offsetX, e.offsetY]; });
        paintCanvas.addEventListener('mousemove', (e) => { if (!isDrawingPaint) return; paintCtx.beginPath(); paintCtx.moveTo(lastPaintX, lastPaintY); paintCtx.lineTo(e.offsetX, e.offsetY); paintCtx.stroke(); [lastPaintX, lastPaintY] = [e.offsetX, e.offsetY]; });
        paintCanvas.addEventListener('mouseup', () => isDrawingPaint = false);
        paintCanvas.addEventListener('mouseout', () => isDrawingPaint = false);
        document.getElementById('clear-canvas-button').addEventListener('click', () => paintCtx.clearRect(0, 0, paintCanvas.width, paintCanvas.height));
        document.querySelector('.color-palette').addEventListener('click', (e) => { if (e.target.classList.contains('color-box')) setPaintColor(e.target.dataset.color); });

        // Initial setup and resize listener
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas(); // Call initially
        setPaintColor('black');

        // Optional cleanup function (if needed in future)
        function cleanupGame() { console.log("Cleaning up Paint"); }
     </script>
</body>
</html>