<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Flip Billboard â€” 9em with Controls</title>

  <!-- LOCAL Flip CSS (same folder) -->
  <link rel="stylesheet" href="./flip.min.css" />

  <style>
    :root {
      /* Controls (defaults) */
      --billboard-size: 9em;     /* same as your flip clock */
      --panel-radius: 0.18em;    /* rounded corners (adjustable) */
      color-scheme: light only;
    }

    html, body { height: 100%; margin: 0; }
    body {
      min-height: 100svh;
      display: grid;
      grid-template-rows: auto 1fr;
      background: #fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* Tiny control bar */
    .controls {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      border-bottom: 1px solid #eee;
      font: 13px/1.3 ui-sans-serif, system-ui, -apple-system, Arial, sans-serif;
      color: #333;
      background: #fafafa;
    }
    .controls label { white-space: nowrap; }
    .controls input[type="number"] { width: 6ch; }
    .controls .spacer { flex: 1; opacity: .65; font-size: 12px; }

    /* Stage */
    .stage {
      display: grid;
      place-items: center;
      padding: 2vh 3vw;
    }

    /* Billboard styles */
    .tick { font-size: 1rem; white-space: nowrap; font-family: arial, sans-serif; }

    /* SIZE = 9em by default; user can change via control */
    .tick-flip, .tick-text-inline { font-size: var(--billboard-size); }

    .tick-char { width: 1.15em; }  /* per-character width */
    .tick-group { margin: 0 .5em; text-align: center; }

    .tick-text-inline {
      display: inline-block;
      text-align: center;
      min-width: 1em;
      color: rgb(90, 93, 99) !important;
    }
    .tick-text-inline + .tick-text-inline { margin-left: -.325em; }

    .tick-label {
      margin-top: 1em;
      font-size: 1em;
      color: rgb(90, 93, 99) !important;
    }

    /* Adjustable rounded corners */
    .tick-flip-panel {
      color: #fff !important;
      background: rgb(59, 61, 59) !important;
      border-radius: var(--panel-radius) !important;
      box-shadow: 0 8px 30px rgba(0,0,0,.08);
    }
    .tick-flip-panel-text-wrapper { line-height: 1.45 !important; }
  </style>
</head>
<body>

  <!-- Controls -->
  <form class="controls" id="controls" onsubmit="return false;">
    <label>Size (em):
      <input id="sizeEm" type="number" step="0.1" min="2" max="20" value="9">
    </label>
    <input id="sizeRange" type="range" step="0.1" min="2" max="20" value="9" />
    <label>Corner radius (em):
      <input id="radiusEm" type="number" step="0.01" min="0" max="0.6" value="0.18">
    </label>
    <input id="radiusRange" type="range" step="0.01" min="0" max="0.6" value="0.18" />
    <span class="spacer">Changes are saved automatically</span>
  </form>

  <!-- Stage -->
  <div class="stage">
    <!-- BILLBOARD -->
    <div class="tick billboard" data-did-init="handleTickInit">
      <div data-repeat="true"
           data-layout="horizontal fit"
           data-transform="upper -> split -> delay(random, 120, 180)">
        <span data-view="flip"
              data-transform="ascii -> arrive -> round -> char(a-zA-Z)"
              class="tick-char"></span>
      </div>
    </div>
  </div>

  <!-- LOCAL Flip JS (same folder) -->
  <script src="./flip.min.js"></script>

  <script>
    // Billboard words (edit as you like; pad with spaces to keep widths even)
    const WORDS = ['WELCOME  ','RANDOLPH ','COUNTY   ','IT       ','SUPPORT  '];

    function handleTickInit(tick) {
      let i = 0;
      tick.value = WORDS[i];
      Tick.helper.interval(function () {
        i = (i + 1) % WORDS.length;
        tick.value = WORDS[i];
      }, 3000);
    }

    // === Controls: size & corner radius (persist in localStorage) ===
    const lsKey = 'flip-billboard-settings';
    const $ = (id) => document.getElementById(id);
    const css = document.documentElement.style;

    function apply(sizeEm, radiusEm) {
      css.setProperty('--billboard-size', sizeEm + 'em');
      css.setProperty('--panel-radius', radiusEm + 'em');
      $('sizeEm').value = sizeEm;
      $('sizeRange').value = sizeEm;
      $('radiusEm').value = radiusEm;
      $('radiusRange').value = radiusEm;
    }

    function save(sizeEm, radiusEm) {
      localStorage.setItem(lsKey, JSON.stringify({ sizeEm, radiusEm }));
    }

    function load() {
      try {
        const v = JSON.parse(localStorage.getItem(lsKey));
        if (v && typeof v.sizeEm === 'number' && typeof v.radiusEm === 'number') {
          return v;
        }
      } catch {}
      return { sizeEm: 9, radiusEm: 0.18 };
    }

    // Initialize from saved values
    (function initControls(){
      const { sizeEm, radiusEm } = load();
      apply(sizeEm, radiusEm);

      // Wire inputs (number + range stay in sync)
      const handlers = [
        ['sizeEm', v => apply(+v, +$('radiusEm').value)],
        ['sizeRange', v => apply(+v, +$('radiusEm').value)],
        ['radiusEm', v => apply(+$('sizeEm').value, +v)],
        ['radiusRange', v => apply(+$('sizeEm').value, +v)],
      ];
      handlers.forEach(([id, fn]) => {
        $(id).addEventListener('input', e => {
          const s = +$('sizeEm').value;
          const r = +$('radiusEm').value;
          if (id === 'sizeRange' || id === 'sizeEm') {
            $('sizeEm').value = e.target.value;
            $('sizeRange').value = e.target.value;
            fn(e.target.value);
          } else {
            $('radiusEm').value = e.target.value;
            $('radiusRange').value = e.target.value;
            fn(e.target.value);
          }
          save(+$('sizeEm').value, +$('radiusEm').value);
        });
      });
    })();
  </script>
</body>
</html>
